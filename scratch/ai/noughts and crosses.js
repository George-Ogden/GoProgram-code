const delay=t=>new Promise(i=>setTimeout(i,t));class Noughts_and_Crosses extends Umpire{constructor(t=3,i=3){super(t),this.win=i}check_state(t=this.board){for(let i=0;i<this.size;i++)for(let r=0;r<this.size-this.win+1;r++){if(0==t.data[i][r])continue;let a=t.data[i][r];for(let e=1;e<this.win;e++)if(t.data[i][r+e]!=a){a=0;break}if(0!=a)return a}for(let s=0;s<this.size-this.win+1;s++)for(let o=0;o<this.size;o++){if(0==t.data[s][o])continue;let n=t.data[s][o];for(let l=1;l<this.win;l++)if(t.data[s+l][o]!=n){n=0;break}if(0!=n)return n}for(let h=0;h<this.size-this.win+1;h++)for(let d=0;d<this.size-this.win+1;d++){if(0==t.data[h][d])continue;let f=t.data[h][d];for(let c=1;c<this.win;c++)if(t.data[h+c][d+c]!=f){f=0;break}if(0!=f)return f}for(let w=this.win-1;w<this.size;w++)for(let b=0;b<this.size-this.win+1;b++){if(0==t.data[w][b])continue;let u=t.data[w][b];for(let _=1;_<this.win;_++)if(t.data[w-_][b+_]!=u){u=0;break}if(0!=u)return u}return 0}async find(){await delay(1e3);for(let t=0;t<this.size;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[t][i])continue;let r=!0;for(let a=1;a<this.win;a++)if(this.board.data[t][i+a]!=this.board.data[t][i]){r=!1;break}if(r){for(let e=0;e<this.win;e++){let s=$(`[row=${t}][col=${i+e}] circle`);s.css("background",`radial-gradient(var(--light), ${s.css("background-color")})`)}return}}for(let o=0;o<this.size;o++)for(let n=0;n<this.size-this.win+1;n++){if(!this.board.data[n][o])continue;let l=!0;for(let h=1;h<this.win;h++)if(this.board.data[n+h][o]!=this.board.data[n][o]){l=!1;break}if(l){for(let d=0;d<this.win;d++){let f=$(`[row=${n+d}][col=${o}] circle`);f.css("background",`radial-gradient(var(--light), ${f.css("background-color")})`)}return}}for(let c=0;c<this.size-this.win+1;c++)for(let w=0;w<this.size-this.win+1;w++){if(!this.board.data[c][w])continue;let b=!0;for(let u=1;u<this.win;u++)if(this.board.data[c+u][w+u]!=this.board.data[c][w]){b=!1;break}if(b){for(let _=0;_<this.win;_++){let g=$(`[row=${c+_}][col=${w+_}] circle`);g.css("background",`radial-gradient(var(--light),${g.css("background-color")})`)}return}}for(let k=0;k<this.size-this.win+1;k++)for(let z=this.win-1;z<this.size;z++){if(!this.board.data[k][z])continue;let v=!0;for(let y=1;y<this.win;y++)if(this.board.data[k+y][z-y]!=this.board.data[k][z]){v=!1;break}if(v){for(let p=0;p<this.win;p++){let x=$(`[row=${k+p}][col=${z-p}] circle`);x.css("background",`radial-gradient(var(--light), ${x.css("background-color")})`)}return}}}}