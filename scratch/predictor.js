function line(e,a,n,r){var i=e-n,s=a-r,o=Math.sqrt(i*i+s*s),p=Math.PI-Math.atan2(-s,i);return`<div class=line style='border: 1px solid #000; width: ${o}px; height: 0px; -moz-transform: rotate(${p}rad); -webkit-transform: rotate(${p}rad);    -o-transform: rotate(${p}rad); -ms-transform: rotate(${p}rad); position: absolute; top: ${(a+r)/2}px; left: ${(e+n)/2-o/2}px'</div>`}function parse(e,a){if(null!=e&&e.replace(" ","").match(/^(\d*:){0,2}\d*(\.\d*)?$/))switch(a){case"s":return parseFloat(e)||void 0;case"m":return e.includes(":")?parse(e):80>parse(e,"s")?60*parse(e,"s"):parse(e,"s");case"h":return e.split(":").length<3?480>parse(e,"m")?60*parse(e,"m"):parse(e,"m"):parse(e);default:return e.replace(" ","").split(":").reverse().reduce((e,a,n)=>e+parseFloat(a||0)*60**n,0)}}function draw(){$(".line").remove(),$(".section.interactive .options input.in.use").each(function(){var e=$(this);$(".section.interactive .options input.out").each(function(){var a=$(this);$(this).parent().parent().append(line(e.position().left+e.outerWidth(!1)+parseInt(e.css("marginLeft")),e.position().top+e.outerHeight(!1)/2,a.position().left+parseInt(a.css("marginLeft")),a.position().top+a.outerHeight(!1)/2))})})}function calculate(){let e={},a={};if($(".section.interactive .options input.in").each(function(){var n=$(this);n.removeClass("use");var r=parse(n.val(),formats[n.attr("name")]),i=n.attr("name");n.hasClass("disabled")||null==r||r<defaults[i]/2||(n.addClass("use"),e[i]=r,a[i]=n.val())}),Object.keys(e).length){let n=new XMLHttpRequest;if(n.open("GET",`https://api.goprogram.ai/times?${$.param(e)}`),history.pushState){var r=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+$.param(a);window.history.pushState({path:r},"",r)}n.send(),n.onload=()=>{if(200==n.status){var e=JSON.parse(n.response);for(let a in e)$(`input.in[name=${a}]`).hasClass("disabled")?$(`input.out[name=${a}-predicted]`).css("background","initial"):$(`input.out[name=${a}-predicted]`).css("background","silver"),$(`input.out[name=${a}-predicted]`).val(format(e[a],formats[a]));draw()}else console.error("Error!")}}}$(document).on("keypress",function(e){"13"==(e.keyCode?e.keyCode:e.which)&&calculate()}),document.body.onresize=draw,$("#calculate").on("click",calculate);let defaults={};const t=new XMLHttpRequest;t.open("GET","https://api.goprogram.ai/time/"),t.send(),t.onload=()=>{200==t.status?defaults=JSON.parse(t.response):console.error("Error!")};const formats={100:"s",200:"s",300:"s",400:"s","400H":"s",800:"m",1e3:"m",1500:"m",Mile:"m",3e3:"m","3000SC":"m",5e3:"m","5M":"m",1e4:"m","10M":"h",HM:"h",Mar:"h"};function pad(e,a=2,n="0"){return String(e).padStart(a,n)}function format(e,a){switch(a){case"s":return e.toFixed(2);case"m":return Math.floor(e/60)+":"+pad((e%60).toFixed(2),5);case"h":return Math.floor(e/3600)+":"+pad(Math.floor(e%3600/60))+":"+pad((e%60).toFixed(0));default:return e}}$("input.check").on("click",function(){this.checked?($(this).parent().children("input.in").removeClass("disabled"),$(this).parent().children("input.in").val()||$(this).parent().children("input.in").val(format(defaults[$(this).attr("name")],formats[$(this).attr("name")]))):$(this).parent().children("input.in").addClass("disabled")}),$("input.in").on("focus",function(){$(this).removeClass("disabled"),$(this).parent().children("input.check").prop("checked",!0)}),$("input.in").on("focusout",function(){$(this).val()||($(this).addClass("disabled"),$(this).parent().children("input.check").prop("checked",!1))});let data=Object.fromEntries(new URLSearchParams(window.location.search).entries());for(key in data){let e=$(`input.in[name=${key}]`);e.val(data[key]),e.parent().children("input.check").prop("checked",!0),e.removeClass("disabled")}