const delay=a=>new Promise(b=>setTimeout(b,a));class Noughts_and_Crosses extends Umpire{constructor(a=3,b=3){super(a),this.win=b}check_state(a=this.board){for(let b=0;b<this.size;b++)for(let c=0;c<this.size-this.win+1;c++){if(0==a.data[b][c])continue;let j=a.data[b][c];for(let p=1;p<this.win;p++)if(a.data[b][c+p]!=j){j=0;break}if(0!=j)return j}for(let d=0;d<this.size-this.win+1;d++)for(let e=0;e<this.size;e++){if(0==a.data[d][e])continue;let k=a.data[d][e];for(let q=1;q<this.win;q++)if(a.data[d+q][e]!=k){k=0;break}if(0!=k)return k}for(let f=0;f<this.size-this.win+1;f++)for(let g=0;g<this.size-this.win+1;g++){if(0==a.data[f][g])continue;let l=a.data[f][g];for(let m=1;m<this.win;m++)if(a.data[f+m][g+m]!=l){l=0;break}if(0!=l)return l}for(let h=this.win-1;h<this.size;h++)for(let i=0;i<this.size-this.win+1;i++){if(0==a.data[h][i])continue;let n=a.data[h][i];for(let o=1;o<this.win;o++)if(a.data[h-o][i+o]!=n){n=0;break}if(0!=n)return n}return 0}async find(){await delay(1e3);for(let a=0;a<this.size;a++)for(let b=0;b<this.size-this.win+1;b++){if(!this.board.data[a][b])continue;let q=!0;for(let m=1;m<this.win;m++)if(this.board.data[a][b+m]!=this.board.data[a][b]){q=!1;break}if(q){for(let n=0;n<this.win;n++){let r=$(`[row=${a}][col=${b+n}] circle`);r.css("background",`radial-gradient(var(--light), ${r.css("background-color")})`)}return}}for(let c=0;c<this.size;c++)for(let d=0;d<this.size-this.win+1;d++){if(!this.board.data[d][c])continue;let s=!0;for(let o=1;o<this.win;o++)if(this.board.data[d+o][c]!=this.board.data[d][c]){s=!1;break}if(s){for(let p=0;p<this.win;p++){let t=$(`[row=${d+p}][col=${c}] circle`);t.css("background",`radial-gradient(var(--light), ${t.css("background-color")})`)}return}}for(let e=0;e<this.size-this.win+1;e++)for(let f=0;f<this.size-this.win+1;f++){if(!this.board.data[e][f])continue;let u=!0;for(let i=1;i<this.win;i++)if(this.board.data[e+i][f+i]!=this.board.data[e][f]){u=!1;break}if(u){for(let j=0;j<this.win;j++){let v=$(`[row=${e+j}][col=${f+j}] circle`);v.css("background",`radial-gradient(var(--light),${v.css("background-color")})`)}return}}for(let g=0;g<this.size-this.win+1;g++)for(let h=this.win-1;h<this.size;h++){if(!this.board.data[g][h])continue;let w=!0;for(let k=1;k<this.win;k++)if(this.board.data[g+k][h-k]!=this.board.data[g][h]){w=!1;break}if(w){for(let l=0;l<this.win;l++){let x=$(`[row=${g+l}][col=${h-l}] circle`);x.css("background",`radial-gradient(var(--light), ${x.css("background-color")})`)}return}}}}