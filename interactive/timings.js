const times={"100m":100,"200m":200,"300m":300,"400m":400,"800m":800,"1km":1e3,"1500m":1500,"1-mile":1609,"3km":3e3,"5km":5e3,"5-miles":8046,"10km":1e4,"10-miles":16093,half:21097,marathon:42195};String.prototype.reverse=function(){return this.split("").reverse().join("")};const distances={mi:1609.3,km:1e3,lap:400,speed:1};function parse(a,b){if(null!=a&&a.replace(" ","").match(/^(\d*:){0,2}\d*(\.\d*)?$/))switch(b){case"s":return parseFloat(a)||void 0;case"m":return a.includes(":")?parse(a):60*parse(a,"s");case"h":return a.split(":").length<3?60*parse(a,"m"):parse(a);default:return a.replace(" ","").split(":").reverse().reduce((a,b,c)=>a+parseFloat(b||0)*60**c,0)}}function format(a,c){if("speed"==c)return a;if((a=a.toFixed(0))>215999)return"too long";if("lap"===c)return a;{let b="";for(;a>0;)b=":"+("00"+Math.floor(a%60)).reverse().substr(0,2).reverse()+b,a=Math.floor(a/60);return 1==(b.match(/\:/g)||"").length?"0"+b:"0"==b[1]?b.substr(2):b.substr(1)}}function run(a){let b,c=0;if(!isNaN(b=Object.keys(times).includes($(`#${a}`).val())?times[$(`#${a}`).val()]:parse($(`#${a}`).val(),"time"==a?$(`#${$("#distance").val()}`).attr("format"):$(`#${a}`).attr("format")))){for(distance in c=Object.keys(distances).includes(a)?distances[a]/b:parseInt(times[$("#distance").val()])/b,distances)distance!=a&&$(`#${distance}`).val(format(distances[distance]/c,distance));"time"!=a&&$("#time").val(format(parseInt(times[$("#distance").val()])/c))}}try{if($("#distance").val(window.location.hash.substr(1).split("=")[0]),!$("#distance").val())throw Error;try{if($("#time").val(window.location.hash.substr(1).split("=")[1]),run("time"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`,!$("#mi").val())throw Error}catch{$("#lap").val(80),run("lap"),window.location.hash=`#${$("#distance").val()}`}if(!$("#mi").val())throw Error}catch{$("#distance").val(Object.keys(times)[Math.floor(Object.keys(times).length*Math.random())]),$("#lap").val(80),run("lap"),window.location.hash=""}$("#lap").on("input",()=>run("lap")),$("#km").on("input",()=>run("km")),$("#mi").on("input",()=>run("mi")),$("#time").on("input",()=>(run("time"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`)),$("#distance").on("input",()=>($("#time").attr("time",$("#distance :selected").attr("time")||"1"),run("speed"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`))