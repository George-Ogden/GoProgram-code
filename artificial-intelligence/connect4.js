const umpire = new Noughts_and_Crosses(7, 4);
const player = new Gamer(
    Genetic_Fully_Connected_Neural_Network.from_string({
        type: "Genetic_Fully_Connected_Neural_Network",
        activation_function_name: "tanh",
        activation_function: {},
        length: 3,
        width: 5,
        weights: [
            {
                data: [
                    [0.3403279722177627, 0.24689520435687687, -0.5226585053423729, -0.2164923616652151, -0.563968259736961],
                    [-0.4788535201916742, 0.17684712643989642, 0.12291142350506161, 0.04103616633307, -0.5364040479681176],
                    [0.5522114964648017, 0.40600829159456664, -0.5777135614352573, -0.4192907468705844, -0.4480437166384182],
                    [0.41496840120104844, 0.7077868122993967, 0.3089977621749029, 0.4801129581678541, 0.42219763665041904],
                    [0.16409849078591823, 0.0481616007270315, 1.4014354276745427, 0.07352749127496516, -0.36829053318291677],
                    [-0.5426255105764825, -0.39547560146995697, 0.08327394077868955, -0.40240574625434045, 0.41353587994701013],
                    [-0.19285853890338514, 0.34637456585582266, -0.13444149791226578, 0.3199575933922183, -0.3549930008945942],
                    [-0.2434197210266644, -0.48583292536241995, -0.15820864266410584, -0.30252642416774006, 0.18764013621604472],
                    [-0.3531296596003391, 0.9220124096282505, -0.7816189266530594, -0.43909393577877714, -0.6168284517351141],
                    [-0.37325048257705407, -0.3228238806954197, 0.5285673686099739, -0.0781101903993192, 0.20051054383336916],
                    [0.38654618806491803, -0.33811852584330165, -1.1963601592744548, 0.4540185826932905, -0.17288932320637584],
                    [-0.20770665119217252, -0.023996969369371603, 0.4123962587945187, -0.5283726070991497, 0.5105140252398754],
                    [0.36557882793249513, 0.5727301913849246, -0.3678428826330554, -0.2098359819782091, -0.13718434659792142],
                    [0.4274405180873333, -0.3339558733965545, 0.45049730969916135, -0.5591177606392476, -0.05665772143461119],
                    [0.33612857768933724, -0.29584816685901283, -0.026122737772311, -0.3221092484546502, 0.30804876010821325],
                    [-0.12162096278134008, 0.376645673147913, -0.36871074096790657, -0.31093902963630493, -0.5748635014246548],
                    [0.3484729018608603, -0.26209694482704227, -0.42740179436589393, 0.1791303891637287, -0.3312050618989326],
                    [0.0014731108789169862, -0.2659889341055672, 0.5073926967021368, -0.5348683008395051, -0.5491166465605964],
                    [0.4739678220748834, -0.018128544736762953, -0.08172795587608306, 0.05907851682775334, 0.49145774471755743],
                    [0.5495953157600603, -0.2597083319630355, -0.17713352602805052, 0.459757441696359, -0.26334276556508907],
                    [0.08686479495173297, -0.19189963081825642, 0.029455346456557008, 0.44820563651602763, -0.514124152516188],
                    [-0.09579780767675528, -0.23597564419502698, -0.7620669862857581, -0.13213923445177075, 0.6070645581825784],
                    [-0.40420936024695764, -0.3954979954752511, -0.3058778892507324, -0.1555042715828747, 0.6235206389711809],
                    [0.10858202299547046, -0.2303063081889852, -0.7900930141897651, -0.21749478695029945, 0.6102061014494331],
                    [-0.5310684162510594, 0.14021196172186348, 0.40943501233701585, -0.06351334900818376, 0.506318576377471],
                    [-0.11720362627251557, -0.1780601323593981, -0.5319196317248813, -0.011643396041350066, 0.40355801355214],
                    [-0.4441258347985106, 0.3317305802106608, -0.1471084574181763, 0.04573256327420931, -0.4789548990789138],
                    [0.3855535818032698, 0.030936858045459488, 0.12331850499561618, 0.022323972012786006, -0.2657315956659092],
                    [-0.00773311736712935, -0.202942835784346, 0.11464691258878319, 0.7803857114871728, 0.5020005734711973],
                    [-0.2897883945248262, -0.09755080862886112, 0.21673263866519554, -0.5605582424824741, 0.09988803921059064],
                    [0.14754626439918583, -0.7358541133047429, 0.061858869947468, 0.4958059021286048, 0.13271449808986982],
                    [-0.36643190469146253, -0.2176107171187218, -0.1603749323381383, 0.3226032521220141, 0.6100548082957948],
                    [1.0466904949223728, 0.24572351913324444, 0.6703124873834851, -0.19956957289837463, 0.493394674601102],
                    [-1.0575004922892524, 0.3020978259407964, 0.30142800843344575, 0.5939394122201804, -0.5981120940086478],
                    [0.5528314784673012, -1.344549156282275, 0.4984560028525641, -0.47250190102827516, -0.42153379162098087],
                    [0.19614421488810296, -0.004086394085369059, 0.33740430955333495, -0.5213057323424451, 0.19807323029836257],
                    [-0.5672365559034039, -0.18313794561331964, 0.6095135169583641, -0.5060487289364094, -0.0755840303200257],
                    [-0.44805136502226556, 0.2974872251175438, -0.03356658802340015, 0.5487233174045625, 0.09969630204421126],
                    [-0.19788835903829885, 0.4444566121578296, 0.08908432629266283, -0.3504210822606415, -0.3671502596990632],
                    [0.36828587628043724, -0.6020948948235227, -0.06658445579809041, -0.8875243372660644, -0.11892180535577014],
                    [0.2994948187933067, -0.1421975273801614, -0.8644037733170383, -0.5410957951376142, -0.10507023670975535],
                    [-0.12787098321434057, 0.49772570807694505, -0.749713057244116, 0.6872638748735673, -0.10249773825014197],
                    [0.03769432255293133, 0.3990216924110555, 0.5724347621332335, -0.1456274336730441, -0.1505251234570839],
                    [-0.5256534600882956, 0.5962260349838844, -0.2997497266446807, 0.6179152777330995, 0.23450232737037688],
                    [0.23061979868732374, 0.3388519272114423, 0.3260809909775218, 0.5275506394930265, -0.05115923447017604],
                    [0.5072259708620293, -0.8432753307486869, -0.04576659703412027, -0.4969673542067319, 0.5932896466150057],
                    [-0.251690661302846, 0.44298872841320286, -0.08059348582528846, -0.11737746031316472, 0.2979582632851951],
                    [0.29887455964232545, -0.5005088284252188, -0.10437627967529889, -0.4581919314192592, -0.49067719060947984],
                    [0.01957028047887438, -0.038281911569931354, 0.35100656513131645, -0.5978263937680303, -0.30360271682284595],
                ],
                rows: 49,
                cols: 5,
            },
            {
                data: [
                    [-0.1722247399152482, -0.4120673696741694, 0.3477134026453501, -0.048106773258087064, -0.24730672155772485],
                    [-0.01569424339792654, -0.01851128275694517, 0.28758713572949846, 0.29702700147414296, -0.21191617711730082],
                    [0.16868982627531268, -0.2517067049930598, 0.2508065918230289, -0.49020438301853336, 0.6256770041262905],
                    [0.42044074319382324, -0.20509443021449966, -0.4187947477881202, 0.3684657592807135, -0.27625890958674626],
                    [-0.4675390530357243, 0.6087364885772863, 0.5905633175768369, 0.30821553911906596, -0.7493075998895052],
                ],
                rows: 5,
                cols: 5,
            },
            { data: [[0.04036905971465188], [0.45572701524461967], [-0.11964105655027547], [-0.5808469363943612], [-0.48776000731929914]], rows: 5, cols: 1 },
        ],
        biases: [
            { data: [[-0.5016815010661926, -0.11520703503843202, 0.5103007271665969, 0.5225453812891924, -1.026948608933179]], rows: 1, cols: 5 },
            { data: [[-0.10213570081401836, 0.2736791584819583, -0.33390464583727825, 0.4324557952210116, -0.324340548745028]], rows: 1, cols: 5 },
            { data: [[-0.780846831259816]], rows: 1, cols: 1 },
        ],
        score: 43,
    }),
    umpire,
    5
);
let move_promise;
function displayBoard(board) {
    for (let i = 0; i < board.rows; i++) {
        for (let j = 0; j < board.cols; j++) {
            let x = board.data[i][j];
            if (x != 0) {
                $(`[row=${i}][col=${j}].box circle`).css("background",x < 0 ? "var(--secondary-light)" : "var(--base)");
                $(`[row=${i}][col=${j}].box`).css("background","var(--dark)");
                if (!$(`[row=${i}][col=${j}].box`).hasClass("taken")){
                    $(`[row=${i}][col=${j}].box`).addClass("taken")
                }
            }
        }
    }
    Matrix.map(board, (x) => (x > 0 ? "X" : x < 0 ? "O" : " ")).show();
}
umpire.challenge(player);
function resize() {
    $("#board").height($("#board").width());
}
$(window).resize(resize), resize();
$("td.box").on("mouseover", function () {
    $(`[col=${$(this).attr("col")}]:not(.taken)`).css("background", "var(--secondary)");
});
$("td.box").on("click", function () {
    move_promise([Object.values($(`[col=${$(this).attr("col")}]:not(.taken)`)).reduce((a, b) => Math.max(a, $(b).attr("row") || 0), 0), $(this).attr("col")]);
});
$("td.box").on("mouseout", function () {
    $(`[col=${$(this).attr("col")}]:not(.taken)`).css("background", "var(--dark)");
});
