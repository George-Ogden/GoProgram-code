class Matrix{constructor(t=0,s=0){this.data=[],this.rows=t,this.cols=s;for(let a=0;a<t;a++){this.data.push([]);for(let t=0;t<s;t++)this.data[a].push(1)}this.randomise()}static fromArray(t){let s=new Matrix(t.length,t[0].length);return s.data=t,s}toArray(t){return this.data}set(t){this.rows=t.rows,this.cols=t.cols,this.data=t.data}show(){return console.table(this.data),this.data}map(t,s=null){if(s){let a=new Matrix(this.rows,this.cols);for(let r=0;r<this.rows;r++)for(let e=0;e<this.cols;e++)a.data[r][e]=t(this.data[r][e],s.data[r][e]);return a}for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.data[s][a]=t(this.data[s][a])}static map(t,s){let a=Matrix.fromArray(t.data);return a.map(s),a}randomise(){this.map(Math.random)}reset(){this.map(t=>0)}transpose(){this.set(Matrix.transpose(this))}static transpose(t){let s=new Matrix(t.cols,t.rows);for(let a=0;a<t.rows;a++)for(let r=0;r<t.cols;r++)s.data[r][a]=t.data[a][r];return s}static add(t,s){return t.map((t,s)=>t+s,s)}add(t){this.set(Matrix.add(this,t))}static subtract(t,s){return t.map((t,s)=>t-s,s)}subtract(t){this.set(Matrix.subtract(this,t))}multiply(t){"number"==typeof t?this.map(s=>s*t):this.set(this.map((t,s)=>t*s,t))}static multiply(t,s){return Matrix.fromArray(t.data).multiply(s)}static dot(t,s){if(t.cols=s.rows){let a=new Matrix(t.rows,s.cols);for(let r=0;r<a.rows;r++)for(let e=0;e<a.cols;e++){let i=0;for(let a=0;a<t.cols;a++)i+=t.data[r][a]*s.data[a][e];a.data[r][e]=i}return a}t.show(),s.show()}dot(t){this.set(Matrix.dot(this,t))}rss(){let t=0;for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)t+=this.data[s][a]*this.data[s][a];return t}sum(){return this.data.reduce((t,s)=>t[0]+s.reduce((t,s)=>t+s))}static flatten(t){let s=new Matrix(1,t.rows*t.cols);for(let a=0;a<t.rows;a++)for(let r=0;r<t.cols;r++)s.data[0][a*t.cols+r]=t.data[a][r];return s}flatten(){this.set(Matrix.flatten(this))}subsection(t,s,a,r){let e=new Matrix(a,r);for(let i=t;i<t+a;i++)for(let a=s;a<s+r;a++)e.data[i-t][a-s]=this.data[i][a];return e}copy(){return Matrix.fromArray(this.data)}}