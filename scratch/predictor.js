function line(d,e,f,g){var b=d-f,c=e-g,h=Math.sqrt(b*b+c*c),a=Math.PI-Math.atan2(-c,b);return`<div class=line style='border: 1px solid #000; width: ${h}px; height: 0px; -moz-transform: rotate(${a}rad); -webkit-transform: rotate(${a}rad);    -o-transform: rotate(${a}rad); -ms-transform: rotate(${a}rad); position: absolute; top: ${(e+g)/2}px; left: ${(d+f)/2-h/2}px'</div>`}function parse(a,b){if(null!=a&&a.replace(" ","").match(/^(\d*:){0,2}\d*(\.\d*)?$/))switch(b){case"s":return parseFloat(a)||void 0;case"m":return a.includes(":")?parse(a):80>parse(a,"s")?60*parse(a,"s"):parse(a,"s");case"h":return a.split(":").length<3?480>parse(a,"m")?60*parse(a,"m"):parse(a,"m"):parse(a);default:return a.replace(" ","").split(":").reverse().reduce((a,b,c)=>a+parseFloat(b||0)*60**c,0)}}function draw(){$(".line").remove(),$(".section.interactive .options input.in.use").each(function(){var a=$(this);$(".section.interactive .options input.out").each(function(){var b=$(this);$(this).parent().parent().append(line(a.position().left+a.outerWidth(!1)+parseInt(a.css("marginLeft")),a.position().top+a.outerHeight(!1)/2,b.position().left+parseInt(b.css("marginLeft")),b.position().top+b.outerHeight(!1)/2))})})}function calculate(){let b={},d={};if($(".section.interactive .options input.in").each(function(){var a=$(this);a.removeClass("use");var c=parse(a.val(),formats[a.attr("name")]),e=a.attr("name");a.hasClass("disabled")||null==c||c<defaults[e]/2||(a.addClass("use"),b[e]=c,d[e]=a.val())}),Object.keys(b).length){let a=new XMLHttpRequest;if(a.open("GET",`https://api.goprogram.ai/times?${$.param(b)}`),history.pushState){var c=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+$.param(d);window.history.pushState({path:c},"",c)}a.send(),a.onload=()=>{if(200==a.status){var c=JSON.parse(a.response);for(let b in c)$(`input.in[name=${b}]`).hasClass("disabled")?$(`input.out[name=${b}-predicted]`).css("background","initial"):$(`input.out[name=${b}-predicted]`).css("background","silver"),$(`input.out[name=${b}-predicted]`).val(format(c[b],formats[b]));draw()}else console.error("Error!")}}}$(document).on("keypress",function(a){"13"==(a.keyCode?a.keyCode:a.which)&&calculate()}),document.body.onresize=draw,$("#calculate").on("click",calculate);let defaults={};const t=new XMLHttpRequest;t.open("GET","https://api.goprogram.ai/time/"),t.send(),t.onload=()=>{200==t.status?defaults=JSON.parse(t.response):console.error("Error!")};const formats={100:"s",200:"s",300:"s",400:"s","400H":"s",800:"m",1e3:"m",1500:"m",Mile:"m",3e3:"m","3000SC":"m",5e3:"m","5M":"m",1e4:"m","10M":"h",HM:"h",Mar:"h"};function pad(a,b=2,c="0"){return String(a).padStart(b,c)}function format(a,b){switch(b){case"s":return a.toFixed(2);case"m":return Math.floor(a/60)+":"+pad((a%60).toFixed(2),5);case"h":return Math.floor(a/3600)+":"+pad(Math.floor(a%3600/60))+":"+pad((a%60).toFixed(0));default:return a}}$("input.check").on("click",function(){this.checked?($(this).parent().children("input.in").removeClass("disabled"),$(this).parent().children("input.in").val()||$(this).parent().children("input.in").val(format(defaults[$(this).attr("name")],formats[$(this).attr("name")]))):$(this).parent().children("input.in").addClass("disabled")}),$("input.in").on("focus",function(){$(this).removeClass("disabled"),$(this).parent().children("input.check").prop("checked",!0)}),$("input.in").on("focusout",function(){$(this).val()||($(this).addClass("disabled"),$(this).parent().children("input.check").prop("checked",!1))});let data=Object.fromEntries(new URLSearchParams(window.location.search).entries());for(key in data){let a=$(`input.in[name=${key}]`);a.val(data[key]),a.parent().children("input.check").prop("checked",!0),a.removeClass("disabled")}