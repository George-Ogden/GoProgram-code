const delay=t=>new Promise(i=>setTimeout(i,t));class Noughts_and_Crosses extends Umpire{constructor(t=3,i=3){super(t),this.win=i}check_state(t=this.board){for(let i=0;i<this.size;i++)for(let e=0;e<this.size-this.win+1;e++){if(0==t.data[i][e])continue;let r=t.data[i][e];for(let s=1;s<this.win;s++)if(t.data[i][e+s]!=r){r=0;break}if(0!=r)return r}for(let i=0;i<this.size-this.win+1;i++)for(let e=0;e<this.size;e++){if(0==t.data[i][e])continue;let r=t.data[i][e];for(let s=1;s<this.win;s++)if(t.data[i+s][e]!=r){r=0;break}if(0!=r)return r}for(let i=0;i<this.size-this.win+1;i++)for(let e=0;e<this.size-this.win+1;e++){if(0==t.data[i][e])continue;let r=t.data[i][e];for(let s=1;s<this.win;s++)if(t.data[i+s][e+s]!=r){r=0;break}if(0!=r)return r}for(let i=this.win-1;i<this.size;i++)for(let e=0;e<this.size-this.win+1;e++){if(0==t.data[i][e])continue;let r=t.data[i][e];for(let s=1;s<this.win;s++)if(t.data[i-s][e+s]!=r){r=0;break}if(0!=r)return r}return 0}async find(){await delay(1e3);for(let t=0;t<this.size;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[t][i])continue;let e=!0;for(let r=1;r<this.win;r++)if(this.board.data[t][i+r]!=this.board.data[t][i]){e=!1;break}if(e){for(let e=0;e<this.win;e++){let r=$(`[row=${t}][col=${i+e}] circle`);r.css("background",`radial-gradient(var(--light), ${r.css("background-color")})`)}return}}for(let t=0;t<this.size;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[i][t])continue;let e=!0;for(let r=1;r<this.win;r++)if(this.board.data[i+r][t]!=this.board.data[i][t]){e=!1;break}if(e){for(let e=0;e<this.win;e++){let r=$(`[row=${i+e}][col=${t}] circle`);r.css("background",`radial-gradient(var(--light), ${r.css("background-color")})`)}return}}for(let t=0;t<this.size-this.win+1;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[t][i])continue;let e=!0;for(let r=1;r<this.win;r++)if(this.board.data[t+r][i+r]!=this.board.data[t][i]){e=!1;break}if(e){for(let e=0;e<this.win;e++){let r=$(`[row=${t+e}][col=${i+e}] circle`);r.css("background",`radial-gradient(var(--light),${r.css("background-color")})`)}return}}for(let t=0;t<this.size-this.win+1;t++)for(let i=this.win-1;i<this.size;i++){if(!this.board.data[t][i])continue;let e=!0;for(let r=1;r<this.win;r++)if(this.board.data[t+r][i-r]!=this.board.data[t][i]){e=!1;break}if(e){for(let e=0;e<this.win;e++){let r=$(`[row=${t+e}][col=${i-e}] circle`);r.css("background",`radial-gradient(var(--light), ${r.css("background-color")})`)}return}}}}