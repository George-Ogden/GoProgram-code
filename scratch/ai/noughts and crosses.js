const delay=t=>new Promise(i=>setTimeout(i,t));class Noughts_and_Crosses extends Umpire{constructor(t=3,i=3){super(t),this.win=i}check_state(t=this.board){for(let i=0;i<this.size;i++)for(let r=0;r<this.size-this.win+1;r++){if(0==t.data[i][r])continue;let e=t.data[i][r];for(let a=1;a<this.win;a++)if(t.data[i][r+a]!=e){e=0;break}if(0!=e)return e}for(let i=0;i<this.size-this.win+1;i++)for(let r=0;r<this.size;r++){if(0==t.data[i][r])continue;let e=t.data[i][r];for(let a=1;a<this.win;a++)if(t.data[i+a][r]!=e){e=0;break}if(0!=e)return e}for(let i=0;i<this.size-this.win+1;i++)for(let r=0;r<this.size-this.win+1;r++){if(0==t.data[i][r])continue;let e=t.data[i][r];for(let a=1;a<this.win;a++)if(t.data[i+a][r+a]!=e){e=0;break}if(0!=e)return e}for(let i=this.win-1;i<this.size;i++)for(let r=0;r<this.size-this.win+1;r++){if(0==t.data[i][r])continue;let e=t.data[i][r];for(let a=1;a<this.win;a++)if(t.data[i-a][r+a]!=e){e=0;break}if(0!=e)return e}return 0}async find(){await delay(1e3);for(let t=0;t<this.size;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[t][i])continue;let r=!0;for(let e=1;e<this.win;e++)if(this.board.data[t][i+e]!=this.board.data[t][i]){r=!1;break}if(r){for(let r=0;r<this.win;r++){let e=$(`[row=${t}][col=${i+r}] circle`);e.css("background",`radial-gradient(var(--light), ${e.css("background-color")})`)}return}}for(let t=0;t<this.size;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[i][t])continue;let r=!0;for(let e=1;e<this.win;e++)if(this.board.data[i+e][t]!=this.board.data[i][t]){r=!1;break}if(r){for(let r=0;r<this.win;r++){let e=$(`[row=${i+r}][col=${t}] circle`);e.css("background",`radial-gradient(var(--light), ${e.css("background-color")})`)}return}}for(let t=0;t<this.size-this.win+1;t++)for(let i=0;i<this.size-this.win+1;i++){if(!this.board.data[t][i])continue;let r=!0;for(let e=1;e<this.win;e++)if(this.board.data[t+e][i+e]!=this.board.data[t][i]){r=!1;break}if(r){for(let r=0;r<this.win;r++){let e=$(`[row=${t+r}][col=${i+r}] circle`);e.css("background",`radial-gradient(var(--light),${e.css("background-color")})`)}return}}for(let t=0;t<this.size-this.win+1;t++)for(let i=this.win-1;i<this.size;i++){if(!this.board.data[t][i])continue;let r=!0;for(let e=1;e<this.win;e++)if(this.board.data[t+e][i-e]!=this.board.data[t][i]){r=!1;break}if(r){for(let r=0;r<this.win;r++){let e=$(`[row=${t+r}][col=${i-r}] circle`);e.css("background",`radial-gradient(var(--light), ${e.css("background-color")})`)}return}}}}