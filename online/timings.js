const times={"100m":100,"200m":200,"300m":300,"800m":800,"1500m":1500,"3km":3e3,"5km":5e3,"10km":1e4,"10-miles":16093,half:21097,marathon:42195};String.prototype.reverse=function(){return this.split("").reverse().join("")};const distances={mi:1609.3,km:1e3,lap:400};function parse(t,e){return t.match(/^ *\d+ *s *$/)?parseInt(t):t.match(/^ *\d+ *m(in)?s? *$/)?60*parseInt(t):t.match(/^ *\d+ *hr?s? *$/)?3600*parseInt(t):t.match(/^ *\d+ *$/)?$(`#${e}`).attr("time")?parseInt(t)*parseInt($(`#${e}`).attr("time")):parseInt(t):t.match(/^( *\d+ *\:){1,2} *\d+ *$/)?t.split(":").reverse().reduce((t,e,s)=>t+e*60**s,0)*("3600"==$(`#${e}`).attr("time")&&(t.match(/\:/g)||"").length<2?60:1):void 0}function format(t,e){if(t>215999)return"too long";switch(e){case"lap":return t.toFixed(0)+"s";default:let s="";for(;t>0;)s=":"+("00"+Math.floor(t%60)).reverse().substr(0,2).reverse()+s,t=Math.floor(t/60);return 1==(s.match(/\:/g)||"").length?"0"+s:"0"==s[1]?s.substr(2):s.substr(1)}}function run(t){let e,s=0;if(e=Object.keys(times).includes($(`#${t}`).val())?times[$(`#${t}`).val()]:parse($(`#${t}`).val(),t),!isNaN(e)){for(distance in s=Object.keys(distances).includes(t)?distances[t]/e:parseInt($("#distance").val())/e,distances)distance!=t&&$(`#${distance}`).val(format(distances[distance]/s,distance));"time"!=t&&$("#time").val(format(parseInt(times[$("#distance").val()])/s))}}window.location.hash.length>0&&Object.keys(times).includes(window.location.hash.substr(1))?$("#distance").val(window.location.hash.substr(1)):$("#distance").val(Object.keys(times)[Math.floor(Object.keys(times).length*Math.random())]),run("lap"),$("#lap").on("input",()=>run("lap")),$("#km").on("input",()=>run("km")),$("#mi").on("input",()=>run("mi")),$("#time").on("input",()=>run("time")),$("#distance").on("input",()=>(window.location.hash=`#${$("#distance").val()}`,$("#time").attr("time",$("#distance :selected").attr("time")||"1"),run("mi")));