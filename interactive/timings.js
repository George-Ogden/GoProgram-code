const times={"100m":100,"200m":200,"300m":300,"400m":400,"800m":800,"1km":1e3,"1500m":1500,"1-mile":1609,"3km":3e3,"5km":5e3,"5-miles":8046,"10km":1e4,"10-miles":16093,half:21097,marathon:42195};String.prototype.reverse=function(){return this.split("").reverse().join("")};const distances={mi:1609.3,km:1e3,lap:400,speed:1};function parse(t,e){if(null!=t&&t.replace(" ","").match(/^(\d*:){0,2}\d*(\.\d*)?$/))switch(e){case"s":return parseFloat(t)||void 0;case"m":return t.includes(":")?parse(t):60*parse(t,"s");case"h":return t.split(":").length<3?60*parse(t,"m"):parse(t);default:return t.replace(" ","").split(":").reverse().reduce((t,e,a)=>t+parseFloat(e||0)*60**a,0)}}function format(t,e){if("speed"==e)return t;if((t=t.toFixed(0))>215999)return"too long";switch(e){case"lap":return t;default:let a="";for(;t>0;)a=":"+("00"+Math.floor(t%60)).reverse().substr(0,2).reverse()+a,t=Math.floor(t/60);return 1==(a.match(/\:/g)||"").length?"0"+a:"0"==a[1]?a.substr(2):a.substr(1)}}function run(t){let e,a=0;if(e=Object.keys(times).includes($(`#${t}`).val())?times[$(`#${t}`).val()]:parse($(`#${t}`).val(),"time"==t?$(`#${$("#distance").val()}`).attr("format"):$(`#${t}`).attr("format")),!isNaN(e)){for(distance in a=Object.keys(distances).includes(t)?distances[t]/e:parseInt(times[$("#distance").val()])/e,distances)distance!=t&&$(`#${distance}`).val(format(distances[distance]/a,distance));"time"!=t&&$("#time").val(format(parseInt(times[$("#distance").val()])/a))}}try{if($("#distance").val(window.location.hash.substr(1).split("=")[0]),!$("#distance").val())throw Error;try{if($("#time").val(window.location.hash.substr(1).split("=")[1]),run("time"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`,!$("#mi").val())throw Error}catch{$("#lap").val(80),run("lap"),window.location.hash=`#${$("#distance").val()}`}if(!$("#mi").val())throw Error}catch{$("#distance").val(Object.keys(times)[Math.floor(Object.keys(times).length*Math.random())]),$("#lap").val(80),run("lap"),window.location.hash=""}$("#lap").on("input",()=>run("lap")),$("#km").on("input",()=>run("km")),$("#mi").on("input",()=>run("mi")),$("#time").on("input",()=>(run("time"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`)),$("#distance").on("input",()=>($("#time").attr("time",$("#distance :selected").attr("time")||"1"),run("speed"),window.location.hash=`#${$("#distance").val()}=${$("#time").val()}`));